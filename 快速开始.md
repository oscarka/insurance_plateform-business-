# 快速开始指南

## 一、一键启动（推荐）

### 1. 创建数据库和测试数据

```bash
# 在项目根目录执行
mysql -u root -p < database_schema.sql
mysql -u root -p < backend/init-test-data.sql
```

### 2. 启动后端服务

```bash
cd backend
npm install
cp .env.example .env
# 编辑 .env 文件，配置数据库连接信息
npm run dev
```

### 3. 测试后端API

```bash
# 在backend目录下
npm test
```

### 4. 启动前端客户端

```bash
# 新终端，在项目根目录
npm run dev
```

### 5. 启动后台管理系统

```bash
# 新终端
cd admin
npm install
npm run dev
```

---

## 二、测试验证步骤

### 步骤1：验证数据库

```sql
-- 连接数据库
mysql -u root -p insurance_platform

-- 检查数据
SELECT COUNT(*) as company_count FROM insurance_companies;
SELECT COUNT(*) as product_count FROM insurance_products;
SELECT COUNT(*) as plan_count FROM product_plans;
SELECT COUNT(*) as liability_count FROM plan_liabilities;
SELECT COUNT(*) as rate_count FROM premium_rates;
```

**预期结果**：所有表都有数据

### 步骤2：测试后端API

```bash
cd backend
npm test
```

**预期输出**：所有测试通过 ✅

### 步骤3：测试前端客户端

1. 访问：http://localhost:3000/new-policy
2. 测试产品选择 → 应该显示"雇主责任险A"
3. 测试方案选择 → 应该显示"方案一"、"方案二"
4. 测试责任配置 → 应该显示保额选项
5. 测试保费计算 → 应该显示计算后的保费
6. 测试提交投保 → 应该成功创建投保单

### 步骤4：测试后台管理系统

1. 访问：http://localhost:3001/admin
2. 登录（任意用户名密码，目前是模拟登录）
3. 测试各个功能模块

---

## 三、常见问题快速解决

### 问题1：数据库连接失败

```bash
# 检查数据库配置
cat backend/.env

# 测试数据库连接
mysql -u root -p -e "USE insurance_platform; SELECT 1;"
```

### 问题2：端口被占用

```bash
# 检查端口占用
lsof -i :3000
lsof -i :3001

# 修改端口（在 .env 或 vite.config.ts 中）
```

### 问题3：API返回404

```bash
# 检查后端服务是否启动
curl http://localhost:3000/health

# 检查路由配置
cat backend/server.js
```

---

## 四、测试数据说明

测试数据包含：
- 1个保司：利宝保险（LIBO）
- 3个责任：意外身故、医疗费用、住院津贴
- 1个产品：雇主责任险A
- 2个方案：方案一（1~3类）、方案二（4~5类）
- 多个费率配置

---

## 五、下一步

1. ✅ 数据库已创建
2. ✅ 测试数据已插入
3. ✅ 后端API已开发
4. ✅ 前端集成代码已创建
5. ⏳ 需要连接前端和后端
6. ⏳ 需要测试完整流程

