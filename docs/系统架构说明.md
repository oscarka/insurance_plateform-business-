# 系统架构说明（通俗版）

## 一、整体架构概览

我们的系统采用**前后端分离**的架构，就像一家餐厅：

- **前端（用户界面）** = 餐厅的**大厅和点餐台** - 用户看到和操作的地方
- **后端（业务逻辑）** = 餐厅的**厨房** - 处理业务逻辑和数据
- **数据库** = 餐厅的**仓库** - 存储所有数据

```
用户 → 前端界面 → 后端服务 → 数据库
      (React)    (Node.js)   (MySQL)
```

---

## 二、当前技术架构

### 1. 前端部分（用户看到的界面）

**技术栈：React + TypeScript + Ant Design**

- **用户端**（企业客户使用）
  - 位置：项目根目录
  - 功能：投保、查看保单、管理客户等
  - 技术：React 19 + Vite

- **后台管理端**（内部管理员使用）
  - 位置：`admin/` 目录
  - 功能：配置产品、管理方案、查看数据等
  - 技术：React 18 + Ant Design 5

**简单理解**：前端就是用户看到的网页界面，用React框架开发，界面美观易用。

---

### 2. 后端部分（处理业务逻辑）

**当前技术栈：Node.js + Express**

- **位置**：`backend/` 目录
- **功能**：
  - 接收前端请求
  - 处理业务逻辑（计算保费、创建投保单等）
  - 连接数据库
  - 返回数据给前端

**简单理解**：后端就是服务器上的程序，负责处理业务逻辑，就像餐厅的厨房处理订单。

**当前实现**：
- 语言：JavaScript (Node.js)
- 框架：Express（轻量级Web框架）
- 数据库连接：mysql2

---

### 3. 数据库部分（存储数据）

**技术栈：MySQL 8.0**

- **部署方式**：Docker容器
- **功能**：存储所有业务数据
  - 保司信息
  - 产品方案
  - 投保单
  - 企业客户
  - 等等...

**简单理解**：数据库就是存储所有数据的仓库，用MySQL数据库。

---

## 三、架构图（通俗版）

```
┌─────────────────────────────────────────────────┐
│              用户端（企业客户）                    │
│         React + Vite (端口 3000)                  │
│  - 投保页面                                      │
│  - 保单管理                                      │
│  - 客户管理                                      │
└──────────────────┬───────────────────────────────┘
                   │ HTTP请求
                   ▼
┌─────────────────────────────────────────────────┐
│           后台管理端（管理员）                    │
│    React + Ant Design (端口 3001)               │
│  - 产品配置                                      │
│  - 方案管理                                      │
│  - 数据统计                                      │
└──────────────────┬───────────────────────────────┘
                   │ HTTP请求
                   ▼
┌─────────────────────────────────────────────────┐
│              后端服务（业务处理）                 │
│         Node.js + Express (端口 3000)           │
│  - API接口                                       │
│  - 业务逻辑                                      │
│  - 数据验证                                      │
└──────────────────┬───────────────────────────────┘
                   │ SQL查询
                   ▼
┌─────────────────────────────────────────────────┐
│              数据库（数据存储）                   │
│            MySQL 8.0 (Docker)                   │
│  - 保司表                                        │
│  - 产品表                                        │
│  - 投保单表                                      │
│  - 等等...                                       │
└─────────────────────────────────────────────────┘
```

---

## 四、关于Spring Boot的说明

### 当前架构：Node.js + Express

**优点**：
- ✅ 开发速度快（JavaScript全栈）
- ✅ 前后端可以共用代码
- ✅ 轻量级，启动快
- ✅ 适合中小型项目

**缺点**：
- ⚠️ 性能不如Java（但对我们这个系统够用）
- ⚠️ 企业级支持不如Java成熟

---

### 如果用Spring Boot替代

**优点**：
- ✅ 性能更好（适合高并发）
- ✅ 企业级框架，生态成熟
- ✅ Java工程师熟悉，维护方便
- ✅ 安全性更好
- ✅ 适合大型项目

**缺点**：
- ⚠️ 开发速度稍慢
- ⚠️ 需要Java环境
- ⚠️ 资源占用稍大

---

## 五、架构对比

| 特性 | 当前（Node.js） | Spring Boot |
|------|----------------|-------------|
| **开发语言** | JavaScript | Java |
| **框架** | Express | Spring Boot |
| **性能** | 良好 | 优秀 |
| **学习曲线** | 平缓 | 中等 |
| **企业级支持** | 一般 | 优秀 |
| **适合场景** | 中小型项目 | 中大型项目 |
| **开发速度** | 快 | 中等 |

---

## 六、建议

### 如果团队有Java工程师

**可以考虑使用Spring Boot**，原因：

1. **团队熟悉**：Java工程师熟悉Spring Boot，开发效率高
2. **企业级**：Spring Boot更适合企业级应用
3. **可扩展性**：未来扩展更容易
4. **维护性**：Java生态成熟，维护方便

### 迁移方案

如果决定用Spring Boot，可以：

1. **保留前端**：React前端不需要改动
2. **重写后端**：用Spring Boot重写后端API
3. **数据库不变**：MySQL数据库和表结构不变
4. **接口保持一致**：API接口路径和格式保持一致

**迁移工作量**：
- 前端：✅ 不需要改动
- 后端：⚠️ 需要重写（但业务逻辑清晰，工作量可控）
- 数据库：✅ 不需要改动

---

## 七、当前系统架构总结

### 三层架构

1. **表现层（前端）**
   - React应用
   - 用户界面
   - 用户交互

2. **业务层（后端）**
   - Node.js + Express
   - API接口
   - 业务逻辑处理

3. **数据层（数据库）**
   - MySQL
   - 数据存储
   - 数据查询

### 特点

- ✅ **前后端分离**：前端和后端独立开发、部署
- ✅ **RESTful API**：标准化的接口设计
- ✅ **模块化设计**：功能模块清晰
- ✅ **易于扩展**：可以轻松添加新功能

---

## 八、通俗总结

**当前架构**：
- 前端用React开发用户界面（就像餐厅的菜单和点餐台）
- 后端用Node.js处理业务（就像餐厅的厨房）
- 数据库用MySQL存储数据（就像餐厅的仓库）

**如果改用Spring Boot**：
- 前端不变（还是React）
- 后端改成Spring Boot（就像把厨房从简单厨房升级成专业厨房）
- 数据库不变（还是MySQL）

**选择建议**：
- 如果团队有Java工程师，建议用Spring Boot
- 如果团队主要是前端工程师，可以继续用Node.js
- 两种方案都可以，看团队情况

---

**最后**：架构不是固定的，可以根据团队情况和技术栈选择。重要的是：
1. 前后端分离 ✅
2. 接口标准化 ✅
3. 数据库设计合理 ✅
4. 代码结构清晰 ✅

这些我们已经做到了！👍

