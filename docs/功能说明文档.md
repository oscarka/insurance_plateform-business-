# 企业保险服务平台功能说明文档

## 一、系统概述

### 1.1 这个系统是做什么的？

这个系统是一个**企业保险服务平台**，简单来说，就是帮助企业客户在线购买保险、管理保单的一个网站。

想象一下，以前企业要买保险，需要找保险公司的业务员，填一堆纸质表格，跑来跑去很麻烦。现在有了这个系统，企业客户可以直接在电脑上操作，就像在网上购物一样方便。

### 1.2 系统的主要角色

系统里主要有两类用户：

**第一类：企业客户（使用用户端）**
- 这些是企业老板或者负责保险事务的员工
- 他们用这个系统来给自己公司买保险、查看保单、申请批改等
- 就像普通用户在淘宝上买东西一样，他们在这个平台上买保险

**第二类：平台管理员（使用后台管理端）**
- 这些是平台运营人员
- 他们负责配置保险产品、设置费率、管理规则等
- 就像淘宝的运营人员，负责上架商品、设置价格、管理店铺

### 1.3 系统能对接多个保险公司

这个平台很厉害的地方是，它可以同时对接多个保险公司（比如平安保险、利宝保险等）。每个保险公司可能有不同的产品、不同的费率、不同的规则，系统都能统一管理。

就像一个大商场，里面可以同时卖多个品牌的商品，每个品牌有自己的专柜，但都在同一个商场里，顾客可以方便地比较和选择。

---

## 二、用户端功能（企业客户使用的功能）

### 2.1 在线投保功能

这是系统最核心的功能，让企业客户可以在线购买保险。

**投保流程就像网购一样简单：**

**第一步：选择投保方案**

**具体操作步骤：**

1. **选择保险公司和产品**
   - 在页面上方的产品选择区域，点击下拉框
   - 选择要投保的保险公司（比如：平安保险）
   - 选择该保险公司的产品（比如：企业雇主责任险）
   - 系统会自动加载该产品的信息（产品名称、注册号等）

2. **填写投保类型和风险信息**
   - 选择"投保类型"：新保或续保（新保是默认选项，不可修改）
   - 选择"是否涉高"：选择"是"或"否"（涉及高处作业需要选择"是"）

3. **填写企业基本信息**
   - 填写"投保企业名称"：输入企业的全称（必填）
   - 填写"社会统一信用代码"：输入18位统一社会信用代码（必填）
   - 选择"企业所在地"：
     - 先选择省份（比如：北京市）
     - 再选择城市（比如：北京市区）
     - 最后选择区县（比如：通州区）
   - 点击"风控查询"按钮（可选，用于查询企业风控等级）

4. **配置投保方案**
   - 点击"增加方案"按钮可以添加多个方案
   - 每个方案需要配置：
     - **职业类别**：从下拉框选择（1~3类、4类、5类等）
     - **投保人数**：输入数字（比如：10人）
     - **意外身故伤残保险金**：从下拉框选择保额（10万、30万、50万、80万、100万）
     - **医疗费用保险金**：从下拉框选择保额（1万、2万、5万、10万）
     - **意外每日住院津贴**：固定为100元/天（不可修改）
     - **保障时间**：从下拉框选择（1年或6个月）
   - 系统会根据选择的配置自动计算"每人保费"
   - 可以删除方案（至少保留一个方案）

5. **查看保费信息**
   - 系统会在页面底部显示"合计支付保费"
   - 注意：这里显示的保费是普通职业的保费，部分职业可能涉及加费

**操作注意事项：**
- 必须先选择产品，才能继续后续步骤
- 企业名称和统一社会信用代码是必填项
- 至少需要配置一个方案
- 投保人数必须大于0
- 如果方案有多个，每个方案可以配置不同的责任和保额

**第二步：填写投保信息**

**具体操作步骤：**

1. **确认保险信息**
   - 系统会显示第一步选择的产品信息（产品名称、备案名、注册号）
   - 选择"生效日期"：点击日期选择器，选择保险生效的日期（不能早于今天）
   - 系统会自动计算并显示"终止日期"（根据生效日期和保障期限计算）

2. **完善企业信息**
   - 企业名称和统一社会信用代码会自动填充（从第一步带过来，不可修改）
   - 填写"投保企业联系人姓名"：输入联系人姓名（必填）
   - 填写"投保企业联系人电话"：输入11位手机号（必填，格式：13800138000）
   - 填写"投保企业联系人邮箱"：输入邮箱地址（必填，格式：xxx@xxx.com）
   - 系统会显示"公司所在地"（从第一步带过来，不可修改）
   - 填写"投保企业详细地址"：输入详细地址（必填）
   - 上传"营业执照"：点击"上传文件"按钮，选择营业执照图片（可选）

3. **查看投保方案**
   - 系统会显示第一步配置的所有方案
   - 每个方案显示：
     - 方案名称（方案一、方案二等）
     - 选择的责任和保额（比如：意外身故伤残保险金30万、医疗费用保险金2万等）
     - 保障时间、职业类别、每人保费
   - 可以通过标签页切换查看不同方案

4. **填写被保人信息**

   **方式一：手动添加被保人**
   - 点击"添加被保人"按钮
   - 在表格中填写每个被保人的信息：
     - **姓名**：输入被保人姓名（必填）
     - **证件类型**：从下拉框选择（身份证或护照，默认身份证）
     - **证件号码**：输入身份证号或护照号（必填）
     - **性别**：系统会根据身份证号自动识别（如果是身份证）
     - **出生日期**：系统会根据身份证号自动识别（如果是身份证）
     - **职业代码**：通过职业选择器选择职业，系统自动填充（必填）
     - **职业类别**：系统根据职业代码自动显示（比如：5类）
     - **是否涉及高处作业**：从下拉框选择"是"或"否"（必填）
     - **每人保费**：系统根据职业类别和方案自动计算并显示
   - 每个被保人必须关联到一个方案（通过方案标签页切换，在不同方案下添加被保人）

   **方式二：批量导入被保人**
   - 点击"下载投保模版"按钮，下载Excel模板
   - 在Excel中填写被保人信息（姓名、证件类型、证件号码等）
   - 点击"批量导入被保人"按钮，选择填好的Excel文件上传
   - 系统会自动解析并导入被保人信息

   **职业选择操作：**
   - 在"请选择要查询的职业"输入框中输入职业关键词
   - 系统会显示匹配的职业列表
   - 选择职业后，系统会自动填充该被保人的职业代码和职业类别
   - 可以批量选择：选择一个职业后，当前方案下所有被保人的职业信息都会更新

5. **保存草稿（可选）**
   - 如果信息还没填完，可以点击"缓存此保单"按钮
   - 系统会保存当前填写的信息
   - 下次登录后可以在"草稿"页面找到并继续填写

6. **查看总保费**
   - 系统会在页面顶部显示"总保费"金额
   - 总保费 = 所有被保人的保费之和
   - 每个被保人的保费会根据其职业类别自动计算

**操作注意事项：**
- 生效日期不能早于今天
- 联系人电话必须是11位手机号
- 联系人邮箱必须是有效的邮箱格式
- 每个被保人必须填写完整的个人信息
- 被保人的职业类别不能高于方案选择的职业类别（比如方案选的是1~3类，被保人不能是5类）
- 可以随时保存草稿，不用担心信息丢失

**第三步：确认信息及支付**

**具体操作步骤：**

1. **查看投保方案摘要**
   - 系统会显示所有配置的方案
   - 每个方案显示：方案名称、身故赔偿、医疗赔偿、被保人数、每人保费、总保费
   - 页面底部显示"合计支付保费"总金额

2. **查看企业信息摘要**
   - 系统会显示企业名称和联系人信息
   - 用于最后确认企业信息是否正确

3. **阅读并同意保险条款**
   - 系统会显示需要同意的条款列表：
     - 《投保须知及投保声明》
     - 《保险条款及告知》
     - 《特别约定-平台团意250704》
     - 《免责条款》
     - 《隐私政策》
     - 《用户投保敏感个人信息授权书》
   - 点击条款名称可以查看详细内容
   - 必须勾选"我已阅读并同意"复选框，才能提交

4. **提交投保申请**
   - 确认所有信息无误后，点击"立即投保"按钮
   - 系统会进行数据校验和业务规则检查
   - 如果校验通过，提交成功；如果校验失败，会显示错误提示

5. **返回修改（如需要）**
   - 如果发现信息有误，可以点击"上一步"按钮返回修改
   - 修改后可以重新进入确认页面

**第四步：投保完成**

**具体操作步骤：**

1. **查看提交结果**
   - 提交成功后，页面会显示"投保申请已提交"的提示
   - 显示一个绿色的对勾图标

2. **查看提示信息**
   - 系统会提示：审核通过后会发送短信通知
   - 提示可以在"我的保单"中查看进度

3. **后续操作**
   - 点击"返回列表"按钮，可以返回保单列表页面
   - 点击"查看详情"按钮，可以查看刚提交的投保单详情
   - 在"我的保单"页面可以查看投保单状态（待审核、处理中等）

**这个功能的好处：**
- 不用跑保险公司，在家就能买保险
- 可以随时保存草稿，不着急提交
- 系统自动计算保费，不用自己算
- 可以批量导入员工信息，不用一个一个填

---

### 2.2 保单管理功能

投保完成后，客户可以在"我的保单"页面管理所有保单。

**具体操作步骤：**

1. **进入保单列表页面**
   - 登录系统后，点击左侧菜单的"我的保单"
   - 或者点击首页的"我的保单"按钮

2. **查看保单列表**
   - 系统会显示所有保单，以表格形式展示
   - 每个保单显示以下信息：
     - **投保人名称**：企业名称
     - **人数**：被保人总数
     - **订单号**：系统生成的订单编号
     - **保单号**：保险公司生成的保单编号（如果已承保）
     - **产品名称**：投保的产品名称
     - **金额**：总保费金额
     - **保全信息**：保单的保全状态（申请完成、审核中等）
     - **保单状态**：用不同颜色的标签显示
       - **保障中**：绿色标签，保单已经生效，正在保障中
       - **处理中**：蓝色标签，保单正在审核或处理中
       - **已过期**：灰色标签，保单已经过期
       - **待审核**：黄色标签，保单提交了，等待审核

3. **搜索和筛选保单**
   - **按投保人名称搜索**：
     - 在"投保人名称"输入框中输入企业名称关键词
     - 点击"查询"按钮或按回车键
     - 系统会显示匹配的保单
   - **按保单号搜索**：
     - 在"保单号"输入框中输入保单号
     - 点击"查询"按钮或按回车键
     - 系统会显示匹配的保单
   - **按保单状态筛选**：
     - 在"保单状态"下拉框中选择状态（全部订单、保障中、处理中、已过期）
     - 点击"查询"按钮
     - 系统会显示符合状态的保单
   - **组合搜索**：
     - 可以同时使用多个搜索条件
     - 系统会显示同时满足所有条件的保单

4. **查看保单详情**
   - 点击某个保单的"查看详情"链接
   - 系统会跳转到保单详情页面
   - 可以查看完整的保单信息

5. **下载相关文件**
   - 点击"下载发票"按钮，可以下载发票文件（如果已生成）
   - 点击"查看日志"按钮，可以查看保单的操作日志

6. **分页浏览**
   - 如果保单很多，系统会分页显示
   - 可以点击页码或"上一页"/"下一页"按钮切换页面
   - 页面底部显示总记录数和当前页信息

**操作注意事项：**
- 保单列表默认按创建时间倒序排列（最新的在前）
- 如果搜索不到结果，检查搜索条件是否正确
- 保单状态会实时更新，刷新页面可以看到最新状态
- 只有已承保的保单才有保单号

**这个功能的好处：**
- 所有保单集中管理，不用到处找
- 可以快速查找某个保单
- 随时查看保单详情，不用打电话问保险公司

---

### 2.3 保单详情功能

点击某个保单的"查看详情"，可以看到这个保单的完整信息。

**显示的信息包括：**

**投保人信息**
- 企业名称、统一社会信用代码
- 联系人姓名、电话、邮箱
- 公司地址等

**保险信息**
- 保单号、产品名称
- 生效起期、生效止期
- 总保费金额
- 投保单号等

**投保方案**
- 显示选择了哪些方案（方案一、方案二等）
- 每个方案的保障内容：
  - 意外身故伤残保险金：比如10万
  - 医疗费用保险金：比如1万
  - 意外每日住院津贴：比如100元/天
  - 保障时间：比如1年
  - 职业类别：比如5类
  - 每人保费：比如224元

**被保人信息**
- 显示所有被保人的详细信息
- 包括：姓名、证件类型、证件号码、性别、状态、生效日期、失效日期、职业类型等
- 可以分页查看，如果被保人很多的话

**可以进行的操作：**
- 下载电子保单（PDF格式）
- 下载发票
- 下载在保人员清单（Excel格式）
- 申请保全批改（比如要增加或减少被保人）

**这个功能的好处：**
- 保单信息一目了然，不用翻纸质文件
- 可以随时下载需要的文件
- 方便管理和存档

---

### 2.4 批改功能（保全批改）

批改就是修改已经生效的保单，比如：
- **增员**：增加新的被保人
- **减员**：减少被保人
- **替换**：替换被保人（比如某个员工离职了，换一个新员工）

**具体操作步骤：**

1. **进入批改页面**
   - 在保单详情页面，点击"保全批改"按钮
   - 系统会跳转到批改申请页面

2. **选择批改类型**
   - **增员**：点击"增员"标签
   - **减员**：点击"减员"标签
   - **替换**：点击"替换"标签

3. **填写批改信息**

   **增员操作：**
   - 点击"添加被保人"按钮
   - 填写新被保人的信息（姓名、身份证号、职业代码等）
   - 可以添加多个被保人
   - 系统会自动计算增加的保费

   **减员操作：**
   - 在现有被保人列表中，勾选要删除的被保人
   - 点击"删除选中"按钮
   - 系统会自动计算减少的保费（会退费）

   **替换操作：**
   - 在现有被保人列表中，勾选要替换的被保人
   - 点击"替换"按钮
   - 填写新被保人的信息
   - 系统会自动计算保费差额

4. **确认批改信息**
   - 系统会显示批改前后的对比
   - 显示保费变化（增加或减少的金额）
   - 确认无误后，点击"提交批改申请"

5. **等待审核**
   - 提交后，批改申请状态为"待审核"
   - 审核通过后，批改生效
   - 可以在保单详情页面查看批改记录

**批改时的校验规则：**

1. **增员校验**
   - 新增的被保人不能重复（身份证号不能与现有被保人重复）
   - 新增的被保人年龄必须在允许范围内（16-65周岁）
   - 新增的被保人职业类别不能高于方案选择的职业类别
   - 新增的被保人不能有重复投保记录

2. **减员校验**
   - 减员后，剩余被保人总数不能低于最低人数要求（默认3人）
   - 只能减员，不能全部删除

3. **替换校验**
   - 新被保人的信息必须完整
   - 新被保人不能与现有被保人重复
   - 新被保人必须符合年龄、职业等限制

**操作注意事项：**
- 只有"保障中"的保单才能申请批改
- 批改申请需要审核，不是立即生效
- 批改生效后，保费会自动调整
- 增员需要补缴保费，减员会退还保费
- 批改记录会保存在系统中，可以随时查看

**这个功能的好处：**
- 员工变动时不用重新买保险，直接批改就行
- 操作简单，在线就能完成
- 保费会自动调整（增员要加钱，减员会退钱）

---

### 2.5 续保功能

续保就是保单快到期了，继续买保险。

**续保流程：**
1. 系统会在保单快到期时提醒客户
2. 客户可以选择续保
3. 系统会自动填充之前的信息（不用重新填）
4. 客户确认后提交续保申请

**这个功能的好处：**
- 不用重新填写信息，省时省力
- 不会忘记续保，系统会提醒
- 保障不中断

---

### 2.6 草稿管理功能

在投保过程中，如果信息还没填完，可以保存为草稿，下次继续填写。

**草稿功能：**
- 在填写投保信息时，可以点击"缓存此保单"保存草稿
- 草稿会保存在系统中
- 下次登录后，可以在"草稿"页面找到未完成的投保单
- 点击继续填写，可以接着上次的地方继续

**这个功能的好处：**
- 不用一次性填完所有信息，可以分多次填写
- 不会因为网络问题或临时有事而丢失已填写的信息
- 方便灵活，随时可以继续

---

## 三、数据校验规则和业务规则

### 3.1 字段格式校验

系统会对用户输入的数据进行格式校验，如果格式不正确，会提示错误，无法提交。

**企业信息校验：**

1. **企业名称**
   - 必填项，不能为空
   - 长度限制：2-200个字符
   - 不能只包含空格或特殊字符

2. **统一社会信用代码**
   - 必填项，不能为空
   - 格式要求：18位字符，由数字和大写字母组成
   - 格式示例：91131028MAC0E1R50R
   - 如果格式不正确，会提示"统一社会信用代码格式不正确"

3. **联系人姓名**
   - 必填项，不能为空
   - 长度限制：2-50个字符
   - 不能只包含空格或特殊字符

4. **联系人电话**
   - 必填项，不能为空
   - 格式要求：11位手机号，以1开头
   - 格式示例：13800138000
   - 如果格式不正确，会提示"手机号格式不正确"

5. **联系人邮箱**
   - 必填项，不能为空
   - 格式要求：符合邮箱格式（包含@符号）
   - 格式示例：alice@example.com
   - 如果格式不正确，会提示"邮箱格式不正确"

6. **企业地址**
   - 必填项，不能为空
   - 长度限制：不超过500个字符

**被保人信息校验：**

1. **姓名**
   - 必填项，不能为空
   - 长度限制：2-50个字符

2. **证件类型**
   - 必填项，从下拉框选择（身份证或护照）

3. **证件号码**
   - 必填项，不能为空
   - 如果是身份证：
     - 格式要求：18位，由17位数字+1位数字或X组成
     - 格式示例：110101199001011234
     - 如果格式不正确，会提示"身份证号格式不正确"
   - 如果是护照：
     - 格式要求：符合护照号码格式
     - 如果格式不正确，会提示"护照号格式不正确"

4. **职业代码**
   - 必填项，不能为空
   - 必须通过职业选择器选择，不能手动输入
   - 如果未选择，会提示"请选择职业"

5. **职业类别**
   - 系统根据职业代码自动显示
   - 不能手动修改

---

### 3.2 业务规则校验

系统会根据业务规则检查数据，如果不符合规则，会拦截并提示错误。

**地区限制规则：**

- **规则说明**：某些地区可能不支持投保
- **检查时机**：提交投保申请时
- **错误提示**：如果企业所在地在限制列表中，会提示"该地区（XX省）暂不支持投保"
- **处理方式**：需要选择其他支持的地区，或联系客服咨询

**最低在保人数限制：**

- **规则说明**：投保的被保人总数不能低于最低人数要求
- **默认限制**：最低3人（可配置）
- **检查时机**：提交投保申请时
- **错误提示**：如果被保人总数少于最低人数，会提示"最低在保人数为X人，当前投保人数为Y人"
- **处理方式**：需要增加被保人数量，或联系客服咨询是否可以降低人数要求

**年龄限制规则：**

- **规则说明**：被保人的年龄必须在允许范围内
- **默认限制**：16-65周岁（可配置）
- **检查时机**：提交投保申请时
- **检查方式**：系统根据身份证号自动计算年龄
- **错误提示**：如果年龄不在范围内，会提示"被保人XX年龄为X岁，不在允许范围（16-65周岁）内"
- **处理方式**：需要更换被保人，或联系客服咨询是否可以放宽年龄限制

**重复投保校验：**

- **规则说明**：同一个被保人（相同身份证号）不能重复投保同一个产品
- **检查范围**：仅检查本平台数据库（不检查保险公司系统）
- **检查时机**：提交投保申请时
- **检查条件**：检查是否有相同身份证号的投保单，且状态为"草稿"、"待核保"或"已承保"
- **错误提示**：如果发现重复投保，会提示"被保人XX（身份证号：XXX）已存在投保记录，不能重复投保"
- **处理方式**：
  - 如果之前的投保单是草稿，可以删除草稿后重新投保
  - 如果之前的投保单已生效，不能重复投保
  - 如果需要修改，可以通过批改功能

**投保份数限制：**

- **规则说明**：同一个被保人（相同身份证号）对同一个产品最多只能投保X份（默认1份）
- **检查范围**：仅检查本平台数据库（不检查保险公司系统）
- **检查时机**：提交投保申请时
- **检查条件**：检查该被保人是否已有有效保单（状态为"有效"或"已生效"）
- **错误提示**：如果超过限制，会提示"被保人XX（身份证号：XXX）已有X份有效保单，最多只能投保X份"
- **处理方式**：
  - 如果已达到上限，不能继续投保
  - 如果需要增加，可以联系客服咨询是否可以放宽限制

**职业类别限制：**

- **规则说明**：被保人的职业类别不能高于方案选择的职业类别
- **检查时机**：填写被保人信息时（前端提示），提交投保申请时（后端校验）
- **检查方式**：
  - 如果方案选择的是"1~3类"，被保人可以是1类、2类、3类
  - 如果方案选择的是"4类"，被保人可以是1类、2类、3类、4类
  - 如果方案选择的是"5类"，被保人可以是1类、2类、3类、4类、5类
- **错误提示**：如果被保人职业类别高于方案，会提示"被保人XX的职业类别为X类，高于方案选择的职业类别"
- **处理方式**：
  - 修改被保人的职业信息（如果确实不是高危职业）
  - 修改方案的职业类别（选择更高的职业类别，保费会增加）

**生效日期限制：**

- **规则说明**：生效日期不能早于今天
- **检查时机**：选择生效日期时（前端限制），提交投保申请时（后端校验）
- **错误提示**：如果选择早于今天的日期，会提示"生效日期不能早于今天"
- **处理方式**：选择今天或未来的日期

**保费范围限制：**

- **规则说明**：总保费不能低于最低保费要求（可配置，比如最低1000元）
- **检查时机**：提交投保申请时
- **错误提示**：如果保费低于最低要求，会提示"保费不能低于X元"
- **处理方式**：需要增加被保人数量或提高保额，使总保费达到最低要求

---

### 3.3 数据完整性校验

系统会检查必填项是否都已填写，如果缺少必填项，会提示错误。

**必填项列表：**

**第一步必填项：**
- 投保企业名称
- 统一社会信用代码
- 企业所在地（省份、城市、区县）
- 至少一个方案配置完整

**第二步必填项：**
- 生效日期
- 投保企业联系人姓名
- 投保企业联系人电话
- 投保企业联系人邮箱
- 投保企业详细地址
- 至少一个被保人信息完整

**被保人必填项：**
- 姓名
- 证件类型
- 证件号码
- 职业代码
- 是否涉及高处作业

**错误提示：**
- 如果缺少必填项，会提示"请填写XX"或"请选择XX"
- 提交投保申请时，如果必填项不完整，会提示"请完善必填信息"

---

### 3.4 提交投保时的完整校验流程

当用户点击"立即投保"按钮时，系统会按以下顺序进行校验：

1. **数据完整性检查**
   - 检查所有必填项是否已填写
   - 如果缺少必填项，立即返回错误提示

2. **字段格式校验**
   - 检查统一社会信用代码格式
   - 检查联系人电话格式
   - 检查联系人邮箱格式
   - 检查被保人身份证号格式
   - 如果格式不正确，返回错误提示

3. **业务规则校验（按优先级顺序）**
   - 地区限制检查
   - 最低在保人数检查
   - 年龄限制检查
   - 重复投保检查
   - 投保份数限制检查
   - 职业类别限制检查
   - 生效日期检查
   - 保费范围检查
   - 如果任何规则不通过，返回错误提示

4. **数据保存**
   - 如果所有校验通过，保存投保单数据
   - 创建投保单记录，状态为"待核保"
   - 返回成功提示

**注意事项：**
- 所有校验都是实时的，如果不符合规则，会立即提示错误
- 错误提示会明确说明哪个字段或哪个规则不通过
- 用户可以根据错误提示修改数据后重新提交

---

## 四、后台管理端功能（平台管理员使用的功能）

后台管理端是给平台运营人员用的，用来配置和管理整个平台。

### 3.1 保险公司管理

**功能说明：**
- 管理对接的保险公司信息
- 可以添加新的保险公司
- 可以编辑保险公司信息（名称、代码、联系方式等）
- 可以启用或禁用某个保险公司

**具体操作步骤：**

1. **查看保险公司列表**
   - 登录后台管理端
   - 点击左侧菜单的"保险公司管理"
   - 系统会显示所有保险公司的列表
   - 列表显示：保险公司代码、保险公司名称、状态、创建时间等

2. **添加新保险公司**
   - 点击"添加保险公司"按钮
   - 填写保险公司信息：
     - **保险公司代码**：输入唯一代码（必填，如：LIBO、PINGAN等）
     - **保险公司名称**：输入保险公司全称（必填）
     - **联系人姓名**：输入联系人（可选）
     - **联系人电话**：输入联系电话（可选）
     - **联系人邮箱**：输入联系邮箱（可选）
     - **状态**：选择"启用"或"禁用"（默认启用）
   - 点击"保存"按钮
   - 系统会校验代码是否重复，如果重复会提示错误

3. **编辑保险公司信息**
   - 在保险公司列表中，点击某个保险公司的"编辑"按钮
   - 修改需要更新的信息
   - 点击"保存"按钮
   - 注意：保险公司代码不能修改

4. **启用或禁用保险公司**
   - 在保险公司列表中，找到要操作的保险公司
   - 点击"状态"列的开关按钮
   - 或者点击"编辑"按钮，在编辑页面修改状态
   - 禁用后，客户在选择产品时就看不到这个保险公司的产品了

5. **搜索保险公司**
   - 在搜索框中输入保险公司名称或代码
   - 点击"查询"按钮
   - 系统会显示匹配的保险公司

**操作注意事项：**
- 保险公司代码必须唯一，不能重复
- 禁用保险公司后，该保险公司的产品也会被隐藏
- 删除保险公司前，需要先删除该保险公司的所有产品和配置

**为什么需要这个功能：**
- 平台可能对接多个保险公司，需要统一管理
- 每个保险公司有独立的代码和名称
- 只有启用的保险公司，客户才能看到和选择

**使用场景：**
- 新对接一个保险公司时，先在这里添加保险公司信息
- 某个保险公司暂时不合作了，可以禁用，客户就看不到了

---

### 3.2 产品管理

**功能说明：**
- 管理各个保险公司的产品
- 可以查看产品列表（按保险公司筛选）
- 可以查看产品详情（产品名称、注册号、注册名称等）
- 可以启用或禁用某个产品
- 可以通过配置文件批量导入产品

**为什么需要这个功能：**
- 每个保险公司可能有多个产品
- 产品信息需要准确，因为客户投保时要选择产品
- 批量导入可以快速配置大量产品，不用一个一个手动添加

**使用场景：**
- 保险公司发布了新产品，需要添加到系统中
- 产品信息有变化，需要更新
- 某个产品停售了，可以禁用

---

### 3.3 责任管理

**功能说明：**
- 管理每个保险公司的保险责任
- 每个保险公司有自己独立的责任体系
- 可以查看责任列表（按保险公司筛选）
- 可以添加、编辑、删除责任
- 可以设置责任的单位类型（金额、天数、比例等）

**为什么需要这个功能：**
- 不同保险公司的责任虽然名称可能相似，但含义可能不同
- 比如"意外身故伤残"这个责任，平安的定义和利宝的定义可能不一样
- 所以责任要跟着保险公司走，不能混在一起

**使用场景：**
- 新对接保险公司时，需要配置这个保险公司的所有责任
- 保险公司新增了责任类型，需要添加
- 责任的定义有变化，需要更新

---

### 3.4 产品责任配置

**功能说明：**
- 为每个产品配置支持哪些责任
- 为每个责任配置可选的保额选项
- 比如：某个产品的"意外身故伤残"责任，可以选择10万、30万、50万等保额

**为什么需要这个功能：**
- 不是所有产品都支持所有责任
- 每个责任也不是所有保额都可以选
- 需要明确告诉系统：这个产品支持哪些责任，每个责任可以选哪些保额

**使用场景：**
- 配置新产品时，需要设置这个产品支持哪些责任和保额
- 产品责任有变化时，需要更新配置

---

### 3.5 方案管理

**功能说明：**
- 管理保险方案模板
- 方案就是责任和保额的组合
- 可以创建方案模板，客户投保时可以直接选择

**为什么需要这个功能：**
- 有些常用的责任和保额组合，可以做成方案模板
- 客户投保时可以直接选择方案，不用一个一个选责任
- 方便客户，也方便管理

**使用场景：**
- 创建常用的方案模板（比如"基础方案"、"标准方案"、"高级方案"）
- 客户投保时可以选择这些方案，也可以自定义

---

### 3.6 费率管理

**功能说明：**
- 管理保费费率
- 费率就是计算保费的标准
- 不同职业类别、不同责任、不同保额，费率可能不同
- 可以设置基础费率和费率系数

**为什么需要这个功能：**
- 保费不是随便定的，要根据费率计算
- 费率可能经常变化，需要及时更新
- 系统根据费率自动计算保费，确保准确

**使用场景：**
- 保险公司调整费率时，需要更新系统中的费率
- 新增职业类别时，需要设置对应的费率
- 新增责任或保额时，需要设置对应的费率

---

### 3.7 拦截规则管理

**功能说明：**
- 设置业务规则，不符合规则的数据会被拦截
- 比如：被保人数不能超过100人、保费不能低于1000元等
- 可以设置规则的优先级和检查条件

**具体操作步骤：**

1. **查看拦截规则列表**
   - 登录后台管理端
   - 点击左侧菜单的"拦截规则管理"
   - 系统会显示所有拦截规则的列表
   - 列表显示：规则名称、规则类型、检查字段、检查条件、优先级、状态等

2. **添加拦截规则**
   - 点击"添加规则"按钮
   - 填写规则信息：
     - **规则名称**：输入规则名称（必填，如：最低在保人数限制）
     - **规则类型**：选择类型（数据校验/业务规则/风控规则等）
     - **检查字段**：选择要检查的字段（如：insured_count、total_premium等）
     - **检查操作符**：选择操作符（等于/大于/小于/包含/正则匹配等）
     - **检查值**：输入用于比较的值（如：3、1000等）
     - **错误代码**：输入错误代码（必填，如：E001）
     - **错误信息**：输入错误提示信息（必填，如：最低在保人数为3人）
     - **优先级**：输入数字（数字越小优先级越高，如：1）
     - **状态**：选择"启用"或"禁用"（默认启用）
   - 点击"保存"按钮

3. **编辑拦截规则**
   - 在规则列表中，点击某个规则的"编辑"按钮
   - 修改需要更新的信息
   - 点击"保存"按钮

4. **启用或禁用规则**
   - 在规则列表中，找到要操作的规则
   - 点击"状态"列的开关按钮
   - 禁用的规则不会执行检查

5. **调整规则优先级**
   - 在规则列表中，可以拖拽调整规则的顺序
   - 或者编辑规则，修改优先级数字
   - 优先级高的规则会先执行

**常用拦截规则示例：**

1. **最低在保人数限制**
   - 规则名称：最低在保人数限制
   - 检查字段：insured_count
   - 检查操作符：>=
   - 检查值：3
   - 错误信息：最低在保人数为3人，当前投保人数为X人

2. **最高在保人数限制**
   - 规则名称：最高在保人数限制
   - 检查字段：insured_count
   - 检查操作符：<=
   - 检查值：100
   - 错误信息：最高在保人数为100人，当前投保人数为X人

3. **最低保费限制**
   - 规则名称：最低保费限制
   - 检查字段：total_premium
   - 检查操作符：>=
   - 检查值：1000
   - 错误信息：保费不能低于1000元

4. **地区限制**
   - 规则名称：地区限制
   - 检查字段：province
   - 检查操作符：in（包含）
   - 检查值：["XX省","YY省"]（限制列表）
   - 错误信息：该地区（XX省）暂不支持投保

5. **年龄限制**
   - 规则名称：年龄限制
   - 检查字段：age（根据身份证号计算）
   - 检查操作符：between（范围）
   - 检查值：[16,65]
   - 错误信息：被保人年龄为X岁，不在允许范围（16-65周岁）内

**操作注意事项：**
- 规则优先级很重要，优先级高的规则会先执行
- 如果规则拦截，会立即返回错误，不会继续检查后续规则
- 规则可以随时启用或禁用，不需要重启系统
- 修改规则后，新提交的投保申请会使用新规则

**为什么需要这个功能：**
- 有些业务规则必须遵守，不符合的不能投保
- 提前拦截可以避免无效的投保申请
- 给客户明确的错误提示，而不是等保险公司拒绝

**使用场景：**
- 设置被保人数限制
- 设置保费范围限制
- 设置职业类别限制（比如某些高危职业不能投保）
- 设置企业风控等级限制（高风险企业可能被拦截）

---

### 3.8 投保单管理

**功能说明：**
- 查看所有客户的投保单
- 可以按状态筛选（草稿、待核保、核保通过、已承保等）
- 可以查看投保单详情
- 可以处理投保单（审核、拒绝、重试等）

**为什么需要这个功能：**
- 管理员需要监控所有投保单的状态
- 有些投保单可能需要人工处理
- 可以查看投保单的完整信息，方便问题排查

**使用场景：**
- 查看待处理的投保单
- 投保单出问题时，查看详情排查问题
- 需要人工审核的投保单，在这里处理

---

### 3.9 数据统计功能

**功能说明：**
- 统计投保数据
- 可以按时间、保险公司、产品等维度统计
- 显示投保数量、保费总额、通过率等指标

**为什么需要这个功能：**
- 了解业务情况，哪些产品卖得好
- 分析数据，优化业务
- 给领导汇报时用

**使用场景：**
- 查看今天的投保数量
- 查看某个产品的销售情况
- 查看核保通过率
- 生成业务报表

---

### 3.10 系统日志管理

**功能说明：**
- 查看系统操作日志
- 记录所有关键操作（谁在什么时候做了什么）
- 可以按时间、用户、操作类型等筛选

**为什么需要这个功能：**
- 出问题时可以查看日志，快速定位问题
- 审计需要，知道谁做了什么操作
- 安全需要，防止误操作或恶意操作

**使用场景：**
- 投保单出问题时，查看相关日志
- 需要知道某个配置是谁改的
- 系统异常时，查看错误日志

---

### 3.11 接口配置管理

**功能说明：**
- 配置与保险公司对接的接口信息
- 包括接口地址、认证信息、字段映射等
- 可以测试接口是否正常

**为什么需要这个功能：**
- 不同保险公司的接口可能不同
- 需要配置接口地址和认证信息才能调用
- 字段映射就是把系统字段转换成保险公司接口需要的字段

**使用场景：**
- 新对接保险公司时，配置接口信息
- 保险公司接口有变化时，更新配置
- 测试接口是否正常工作

---

## 五、系统特色功能

### 4.1 多保险公司支持

**特色说明：**
- 系统可以同时对接多个保险公司
- 每个保险公司有独立的产品、责任、费率体系
- 客户可以在一个平台上选择不同保险公司的产品

**好处：**
- 客户不用跑多个保险公司，在一个平台就能比较和选择
- 平台可以同时运营多个保险公司的业务
- 扩展性强，新增保险公司时不影响现有业务

---

### 4.2 配置化管理

**特色说明：**
- 产品、责任、费率、规则等都通过配置管理
- 不需要修改代码，只需要修改配置
- 支持批量导入配置

**好处：**
- 配置灵活，可以快速调整
- 不需要技术人员，运营人员就能配置
- 批量导入可以快速配置大量数据

---

### 4.3 自动保费计算

**特色说明：**
- 系统根据选择的方案、被保人信息自动计算保费
- 考虑职业类别、责任保额、费率等因素
- 实时计算，客户选择后立即显示保费

**好处：**
- 客户不用自己算，系统自动算
- 计算准确，不会出错
- 实时显示，客户可以立即看到保费变化

---

### 4.4 智能规则引擎

**特色说明：**
- 系统有规则引擎，自动检查数据是否符合规则
- 不符合规则的数据会被拦截，并给出明确提示
- 规则可以灵活配置，不需要修改代码

**好处：**
- 提前发现问题，避免无效投保
- 给客户明确的错误提示，不用猜为什么被拒绝
- 规则可以随时调整，适应业务变化

---

### 4.5 完整的业务流程

**特色说明：**
- 覆盖投保、核保、承保、批改、续保等全业务流程
- 每个环节都有状态管理
- 支持流程回溯和问题排查

**好处：**
- 业务流程完整，满足实际业务需求
- 状态清晰，知道每个保单在哪个环节
- 出问题时可以快速定位

---

### 4.6 数据可追溯

**特色说明：**
- 所有关键操作都有日志记录
- 可以查看谁在什么时候做了什么
- 支持数据历史追溯

**好处：**
- 出问题时可以快速定位
- 审计需要，有完整的操作记录
- 安全需要，防止误操作或恶意操作

---

## 六、系统使用场景举例

### 场景一：企业首次投保

**背景：**
某公司要给50名员工买雇主责任险，这是第一次在这个平台投保。

**操作流程：**
1. 企业负责人登录系统
2. 点击"立即投保"
3. 第一步：选择保险公司和产品，选择责任和保额，设置保障期限
4. 第二步：填写企业信息（公司名称、地址、联系人等）
5. 第二步：填写被保人信息（可以批量导入50名员工的信息）
6. 系统自动计算总保费
7. 第三步：确认信息，同意条款，提交投保
8. 等待审核，审核通过后保单生效

**这个场景的好处：**
- 不用跑保险公司，在线就能完成
- 批量导入员工信息，不用一个一个填
- 系统自动计算保费，不用自己算
- 可以保存草稿，分多次填写

---

### 场景二：员工变动需要批改

**背景：**
某公司的保单正在保障中，现在有3个新员工入职，需要增加这3个员工。

**操作流程：**
1. 企业负责人登录系统
2. 在"我的保单"中找到对应的保单
3. 点击"查看详情"
4. 点击"保全批改"
5. 选择"增员"
6. 填写3个新员工的信息
7. 提交批改申请
8. 系统自动计算增加的保费
9. 等待审核，审核通过后批改生效

**这个场景的好处：**
- 不用重新买保险，直接批改就行
- 操作简单，在线就能完成
- 保费自动调整，不用自己算

---

### 场景三：保单快到期需要续保

**背景：**
某公司的保单还有一个月就到期了，需要续保。

**操作流程：**
1. 系统会在保单快到期时提醒企业负责人
2. 企业负责人登录系统
3. 在"我的保单"中找到需要续保的保单
4. 点击"续保"
5. 系统自动填充之前的信息（不用重新填）
6. 确认信息，提交续保申请
7. 等待审核，审核通过后续保生效

**这个场景的好处：**
- 不用重新填写信息，省时省力
- 不会忘记续保，系统会提醒
- 保障不中断

---

### 场景四：管理员配置新产品

**背景：**
保险公司发布了新产品，需要在平台上配置。

**操作流程：**
1. 管理员登录后台管理端
2. 在"产品管理"中，选择对应的保险公司
3. 点击"导入产品"或"添加产品"
4. 填写产品信息（产品名称、注册号等）
5. 在"产品责任配置"中，为这个产品配置支持的责任和保额
6. 在"费率管理"中，配置这个产品的费率
7. 启用产品，客户就可以看到了

**这个场景的好处：**
- 配置灵活，不需要修改代码
- 可以批量导入，快速配置
- 配置完成后立即生效，客户就能看到

---

## 七、常见问题解答

### 6.1 客户常见问题

**Q1：投保后多久能生效？**
A：提交投保申请后，需要经过核保审核。审核通过后，保单会在您选择的生效日期生效。一般审核需要1-3个工作日。

**Q2：保费是怎么计算的？**
A：保费是根据您选择的方案、被保人的职业类别、责任保额等因素，按照费率自动计算的。系统会实时显示保费，您可以随时查看。

**Q3：可以修改已经提交的投保单吗？**
A：如果投保单还在审核中，可以联系客服修改。如果已经生效，可以通过"批改"功能修改（比如增员、减员）。

**Q4：如何批量导入员工信息？**
A：在填写被保人信息时，点击"下载投保模版"，下载Excel模板，填好员工信息后，点击"批量导入被保人"上传即可。

**Q5：保单到期了怎么办？**
A：保单到期前，系统会提醒您续保。您可以在"我的保单"中找到需要续保的保单，点击"续保"即可。

---

### 6.2 管理员常见问题

**Q1：如何新增保险公司？**
A：在后台管理端的"保险公司管理"中，点击"添加保险公司"，填写保险公司信息即可。

**Q2：如何配置产品？**
A：在"产品管理"中添加产品，然后在"产品责任配置"中配置产品支持的责任和保额，最后在"费率管理"中配置费率。

**Q3：如何批量导入产品？**
A：准备产品配置文件（Excel或JSON格式），在"产品管理"中点击"导入产品"，选择文件上传即可。

**Q4：费率有变化怎么办？**
A：在"费率管理"中找到对应的费率，修改费率值，保存即可。修改后，新投保的保单会使用新费率。

**Q5：如何查看投保单状态？**
A：在"投保单管理"中，可以查看所有投保单，可以按状态筛选，也可以查看详情。

---

## 八、总结

### 7.1 系统核心价值

这个企业保险服务平台的核心价值在于：

1. **方便快捷**：企业客户不用跑保险公司，在线就能完成投保、批改、续保等操作
2. **统一管理**：可以同时对接多个保险公司，在一个平台统一管理
3. **自动化**：保费自动计算、规则自动检查、流程自动流转
4. **灵活配置**：产品、费率、规则等都可以灵活配置，适应业务变化
5. **完整追溯**：所有操作都有记录，方便问题排查和审计

### 7.2 适用对象

**企业客户：**
- 需要给员工买保险的企业
- 希望在线操作，不用跑保险公司的企业
- 员工变动频繁，需要经常批改的企业

**平台运营方：**
- 保险经纪公司
- 保险代理公司
- 其他需要对接多个保险公司的平台

### 7.3 系统优势

1. **多保险公司支持**：一个平台对接多个保险公司，客户可以方便地比较和选择
2. **配置化管理**：不需要修改代码，运营人员就能配置产品、费率等
3. **自动化程度高**：保费计算、规则检查、流程流转都是自动的
4. **用户体验好**：界面简洁，操作方便，就像网购一样简单
5. **扩展性强**：新增保险公司、产品、功能都很方便

---

**文档说明：**
- 本文档用通俗易懂的语言介绍了系统的各项功能
- 没有涉及技术细节和代码，适合非技术人员阅读
- 如有疑问，可以联系技术支持

---

## 九、功能实现检查清单

根据系统当前实际情况，以下是各功能的实现状态检查清单：

### 9.1 用户端功能（企业客户使用的功能）

#### 在线投保功能
- [x] 第一步：选择投保方案
  - [x] 选择保险公司和产品
  - [x] 填写投保类型和风险信息
  - [x] 填写企业基本信息（企业名称、统一社会信用代码、地址等）
  - [x] 配置投保方案（职业类别、投保人数、责任保额等）
  - [x] 查看保费信息
  - [x] 添加多个方案
- [x] 第二步：填写投保信息
  - [x] 确认保险信息（产品信息、生效日期、终止日期）
  - [x] 完善企业信息（联系人信息、详细地址等）
  - [x] 查看投保方案
  - [x] 手动添加被保人信息
  - [ ] 批量导入被保人（前端有按钮，后端功能待实现）
  - [x] 职业选择器功能
  - [x] 保存草稿功能
- [x] 第三步：确认信息及支付
  - [x] 查看投保方案摘要
  - [x] 查看企业信息摘要
  - [x] 阅读并同意保险条款
  - [x] 提交投保申请
- [x] 第四步：投保完成
  - [x] 显示提交成功提示
  - [x] 跳转到保单列表

#### 保单管理功能
- [x] 查看保单列表
- [x] 按投保人名称搜索
- [x] 按保单号搜索
- [x] 按保单状态筛选
- [x] 分页浏览
- [x] 查看保单详情

#### 保单详情功能
- [x] 查看投保人信息
- [x] 查看保险信息
- [x] 查看投保方案
- [x] 查看被保人信息列表
- [ ] 下载电子保单（前端有按钮，后端功能待实现）
- [ ] 下载发票（前端有按钮，后端功能待实现）
- [ ] 下载在保人员清单（前端有按钮，后端功能待实现）

#### 批改功能（保全批改）
- [x] 批改页面UI（前端已实现）
- [ ] 增员功能（前端有UI，后端功能待实现）
- [ ] 减员功能（前端有UI，后端功能待实现）
- [ ] 替换功能（前端有UI，后端功能待实现）
- [ ] 批改申请提交（后端功能待实现）
- [ ] 批改审核流程（后端功能待实现）

#### 续保功能
- [x] 续保页面UI（前端已实现）
- [ ] 续保申请功能（前端有UI，后端功能待实现）
- [ ] 自动填充之前信息（后端功能待实现）
- [ ] 续保审核流程（后端功能待实现）

#### 草稿管理功能
- [x] 保存草稿功能
- [x] 查看草稿列表
- [x] 按企业分组显示草稿
- [x] 恢复草稿功能
- [x] 删除草稿功能
- [x] 搜索草稿功能

#### 其他功能
- [ ] 风控查询功能（前端有按钮，后端功能待实现）
- [ ] 生成计划书功能（前端有按钮，后端功能待实现）

---

### 9.2 数据校验规则

#### 字段格式校验
- [x] 企业名称格式校验
- [x] 统一社会信用代码格式校验
- [x] 联系人姓名格式校验
- [x] 联系人电话格式校验（11位手机号）
- [x] 联系人邮箱格式校验
- [x] 企业地址格式校验
- [x] 被保人姓名格式校验
- [x] 身份证号格式校验
- [x] 护照号格式校验
- [x] 职业代码必填校验

#### 业务规则校验
- [x] 地区限制规则校验
- [x] 最低在保人数限制校验
- [x] 年龄限制规则校验（16-65周岁）
- [x] 重复投保校验（仅校验本平台数据库）
- [x] 投保份数限制校验（仅校验本平台数据库）
- [x] 职业类别限制校验
- [x] 生效日期限制校验（不能早于今天）
- [ ] 保费范围限制校验（可配置，部分实现）

#### 数据完整性校验
- [x] 必填项检查（企业信息、联系人信息、被保人信息等）
- [x] 提交投保时的完整校验流程

---

### 9.3 后台管理端功能（平台管理员使用的功能）

#### 保险公司管理
- [x] 查看保险公司列表
- [x] 添加新保险公司
- [x] 编辑保险公司信息
- [x] 启用或禁用保险公司
- [x] 搜索保险公司

#### 产品管理
- [x] 查看产品列表
- [x] 按保险公司筛选产品
- [x] 查看产品详情
- [x] 启用或禁用产品
- [ ] 批量导入产品（配置文件导入功能待实现）

#### 责任管理
- [x] 查看责任列表
- [x] 按保险公司筛选责任
- [x] 添加责任
- [x] 编辑责任
- [x] 删除责任
- [ ] 批量导入责任（配置文件导入功能待实现）

#### 产品责任配置
- [x] 为产品配置支持的责任
- [x] 为责任配置可选的保额选项
- [x] 查看产品责任配置

#### 方案管理
- [x] 查看方案列表
- [x] 添加方案
- [x] 编辑方案
- [x] 删除方案
- [ ] 批量导入方案（配置文件导入功能待实现）

#### 费率管理
- [x] 查看费率列表
- [x] 添加费率
- [x] 编辑费率
- [x] 删除费率
- [ ] 批量导入费率（配置文件导入功能待实现）

#### 拦截规则管理
- [x] 查看拦截规则列表
- [x] 添加拦截规则
- [x] 编辑拦截规则
- [x] 启用或禁用规则
- [x] 调整规则优先级
- [x] 删除规则

#### 投保单管理
- [x] 查看所有投保单
- [x] 按状态筛选投保单
- [x] 查看投保单详情
- [x] 处理投保单（审核、拒绝等）

#### 数据统计功能
- [x] 数据统计页面（前端已实现）
- [ ] 按时间维度统计（后端功能待完善）
- [ ] 按保险公司维度统计（后端功能待完善）
- [ ] 按产品维度统计（后端功能待完善）

#### 系统日志管理
- [x] 查看系统操作日志
- [x] 按时间筛选日志
- [x] 按用户筛选日志
- [x] 按操作类型筛选日志

#### 接口配置管理
- [x] 查看接口配置列表
- [x] 配置接口信息（地址、认证信息等）
- [x] 配置字段映射
- [ ] 测试接口功能（待实现）

---

### 9.4 系统特色功能

- [x] 多保险公司支持
- [x] 配置化管理（部分功能支持，批量导入待完善）
- [x] 自动保费计算
- [x] 智能规则引擎
- [x] 完整的业务流程（投保流程完整，批改和续保待完善）
- [x] 数据可追溯（日志记录功能已实现）

---

### 9.5 功能完成度统计

**用户端功能完成度：约 75%**
- 核心投保功能：✅ 100%完成
- 保单管理功能：✅ 100%完成
- 保单详情功能：✅ 80%完成（下载功能待实现）
- 批改功能：⚠️ 20%完成（只有UI）
- 续保功能：⚠️ 20%完成（只有UI）
- 草稿管理功能：✅ 100%完成

**数据校验功能完成度：约 95%**
- 字段格式校验：✅ 100%完成
- 业务规则校验：✅ 95%完成（保费范围限制部分实现）
- 数据完整性校验：✅ 100%完成

**后台管理端功能完成度：约 85%**
- 基础管理功能：✅ 100%完成
- 配置管理功能：✅ 90%完成（批量导入待完善）
- 统计功能：⚠️ 60%完成（前端完成，后端待完善）
- 日志功能：✅ 100%完成

**总体完成度：约 82%**

---

### 9.6 待实现功能优先级

**高优先级（核心业务功能）：**
1. 批改功能后端实现（增员、减员、替换）
2. 续保功能后端实现
3. 批量导入被保人功能

**中优先级（用户体验优化）：**
4. 下载电子保单功能
5. 下载发票功能
6. 下载在保人员清单功能
7. 风控查询功能

**低优先级（功能完善）：**
8. 生成计划书功能
9. 批量导入配置功能（产品、责任、方案、费率等）
10. 数据统计功能完善
11. 接口测试功能

---

**检查清单说明：**
- ✅ 表示功能已完整实现
- ⚠️ 表示功能部分实现（前端完成但后端未完成，或功能不完整）
- [ ] 表示功能未实现或待实现
- 完成度统计基于功能模块的完整实现情况

**最后更新时间：** 2025年1月

---

## 十、乐选渠道待对接接口清单

根据《乐选渠道对接表.xlsx》的要求，以下是需要后续对接的接口清单。这些接口都是与保险公司（利宝保险）对接时需要用到的。

### 10.1 批改相关接口

**接口说明：** 用于处理保单批改业务，包括增员、减员、替换等操作。

1. **创建批改申请接口**
   - **接口路径**：`POST /api/endorsements`
   - **功能说明**：创建批改申请，支持增员、减员、替换等操作
   - **使用场景**：客户需要修改已生效保单的被保人信息时使用
   - **实现状态**：待开发

2. **批改试算接口**
   - **接口路径**：`POST /api/endorsements/:id/calculate`
   - **功能说明**：计算批改后的保费变化（增加或减少的金额）
   - **使用场景**：批改前让客户查看保费变化，确认后再提交
   - **实现状态**：待开发
   - **备注**：需要使用利宝标准批改保费计算接口

3. **撤销批改接口**
   - **接口路径**：`POST /api/endorsements/:id/cancel`
   - **功能说明**：撤销已提交但未生效的批改申请
   - **使用场景**：批改申请提交后，在生效前可以撤销
   - **实现状态**：待开发

---

### 10.2 支付相关接口

**接口说明：** 用于处理保费支付，支持多种支付方式。

1. **创建支付订单接口**
   - **接口路径**：`POST /api/payment/create`
   - **功能说明**：创建支付订单，生成支付二维码或支付链接
   - **使用场景**：客户提交投保单后，需要支付保费时使用
   - **支付方式**：
     - 线上二维码支付（微信、支付宝等）
     - 线下对公支付（银行转账）
     - 聚合支付（支持多种支付方式）
   - **实现状态**：待开发

2. **支付回调接口**
   - **接口路径**：`POST /api/payment/callback`
   - **功能说明**：接收支付平台的回调通知，更新支付状态
   - **使用场景**：支付平台完成支付后，会回调此接口通知系统
   - **实现状态**：待开发

3. **查询支付状态接口**
   - **接口路径**：`GET /api/payment/:id/status`
   - **功能说明**：查询支付订单的支付状态（待支付、已支付、支付失败等）
   - **使用场景**：客户或管理员查询支付状态时使用
   - **实现状态**：待开发

---

### 10.3 文档相关接口

**接口说明：** 用于处理电子单证的上传、下载和推送。

1. **上传文档接口**
   - **接口路径**：`POST /api/documents/upload`
   - **功能说明**：上传文档文件（投保单、批改申请书等）
   - **使用场景**：
     - 客户上传已盖章的投保单
     - 客户上传批改申请书
     - 资料补传功能
   - **支持格式**：PDF、图片等
   - **实现状态**：待开发

2. **下载文档接口**
   - **接口路径**：`GET /api/documents/:id/download`
   - **功能说明**：下载已上传的文档
   - **使用场景**：客户或管理员需要查看或下载文档时使用
   - **实现状态**：待开发

3. **推送电子保单接口**
   - **接口路径**：`POST /api/documents/policy/push`
   - **功能说明**：自动推送电子保单给客户（邮件或短信）
   - **使用场景**：保单生效后，自动发送电子保单给客户
   - **推送方式**：邮件、短信、站内消息等
   - **实现状态**：待开发

4. **推送电子发票接口**
   - **接口路径**：`POST /api/documents/invoice/push`
   - **功能说明**：自动推送电子发票给客户（普票、专票）
   - **使用场景**：
     - 普票：自动推送电子发票
     - 专票：线下开具后，通过邮件发送给客户
   - **实现状态**：待开发

---

### 10.4 风险控制接口

**接口说明：** 用于敏感客户检验，确保业务合规。

1. **敏感客户检验接口**
   - **接口路径**：`POST /api/risk-control/check`
   - **功能说明**：检验投保人、被保险人、用工单位是否为敏感客户
   - **使用场景**：提交投保单时，自动检验是否为敏感客户
   - **检验对象**：
     - 投保人敏感客户检验
     - 被保险人敏感客户检验
     - 用工单位敏感客户检验
   - **调用时机**：提交投保单环节
   - **实现状态**：待开发
   - **备注**：需要接入利宝保险的敏感客户数据或接口

---

### 10.5 查询接口

**接口说明：** 用于高级查询和打印功能。

1. **高级查询保单接口**
   - **接口路径**：`GET /api/policies/search`
   - **功能说明**：支持多条件查询保单（按投保人、保单号、日期范围等）
   - **使用场景**：管理员或客户需要按多个条件查询保单时使用
   - **查询条件**：
     - 投保人名称
     - 保单号
     - 生效日期范围
     - 保单状态
     - 产品名称
     - 等
   - **实现状态**：待开发

2. **打印保单接口**
   - **接口路径**：`GET /api/policies/:id/print`
   - **功能说明**：生成可打印的保单文件（PDF格式）
   - **使用场景**：客户需要打印纸质保单时使用
   - **实现状态**：待开发

3. **获取保险凭证接口**
   - **接口路径**：`GET /api/certificates/:id`
   - **功能说明**：获取保险凭证（用于证明已投保的文件）
   - **使用场景**：客户需要保险凭证时使用
   - **实现状态**：待开发

---

### 10.6 理赔接口

**接口说明：** 用于理赔数据推送。

1. **推送理赔数据接口**
   - **接口路径**：`POST /api/claims/push`
   - **功能说明**：推送理赔变动数据给保险公司
   - **使用场景**：发生理赔时，需要将理赔数据推送给保险公司
   - **实现状态**：待开发
   - **备注**：需确认渠道是否有理赔接口，以及接口的具体要求

---

### 10.7 其他待开发接口

**接口说明：** 其他业务相关的接口。

1. **撤销订单接口**
   - **接口路径**：`POST /api/applications/:id/cancel`
   - **功能说明**：撤销未缴费前的投保单
   - **使用场景**：客户提交投保单后，在支付前可以撤销
   - **实现状态**：待开发

2. **退保接口**
   - **接口路径**：`POST /api/policies/:id/surrender`
   - **功能说明**：未生效保单的退保功能
   - **使用场景**：保单未生效前，客户可以申请退保
   - **实现状态**：待开发
   - **备注**：月单不支持退保

---

### 10.8 接口对接优先级

**高优先级（核心业务功能）：**
1. 批改相关接口（创建批改申请、批改试算、撤销批改）
2. 支付相关接口（创建支付订单、支付回调、查询支付状态）
3. 敏感客户检验接口

**中优先级（重要功能）：**
4. 文档相关接口（上传文档、下载文档）
5. 查询接口（高级查询保单、打印保单）
6. 撤销订单接口
7. 退保接口

**低优先级（辅助功能）：**
8. 推送电子保单接口
9. 推送电子发票接口
10. 获取保险凭证接口
11. 推送理赔数据接口

---

### 10.9 接口对接注意事项

1. **接口认证**：所有接口都需要进行身份认证（使用app_id和app_secret）
2. **数据加密**：敏感数据传输需要加密
3. **接口签名**：需要实现接口签名验证，确保数据安全
4. **错误处理**：需要完善的错误处理和重试机制
5. **日志记录**：所有接口调用都需要记录日志，便于问题排查
6. **字段映射**：系统字段与保险公司接口字段的映射关系需要配置
7. **数据格式**：需要按照保险公司要求的格式转换数据
8. **测试环境**：需要先在测试环境完成对接和测试，再切换到生产环境

---

### 10.10 接口实现状态统计

**待开发接口总数：** 17个

**按优先级分类：**
- 高优先级：3个（批改接口、支付接口、敏感客户检验）
- 中优先级：7个（文档接口、查询接口、撤销退保接口）
- 低优先级：7个（推送接口、理赔接口等）

**预计开发时间：**
- 高优先级接口：2-3周
- 中优先级接口：2-3周
- 低优先级接口：1-2周
- **总计：** 约5-8周

---

**接口清单说明：**
- 本清单基于《乐选渠道对接表.xlsx》整理
- 所有接口都是与利宝保险对接时需要用到的
- 接口的具体参数和返回值需要参考保险公司的接口文档
- 接口开发需要与保险公司技术团队协调配合

**最后更新时间：** 2025年1月

---

